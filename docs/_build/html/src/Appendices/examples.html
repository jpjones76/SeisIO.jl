

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Examples &mdash; SeisIO 0.3.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="SeisIO Standard Keywords" href="keywords.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> SeisIO
          

          
          </a>

          
            
            
              <div class="version">
                0.3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">First Steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_data.html">Working with Data</a></li>
</ul>
<p class="caption"><span class="caption-text">Reading Files</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Formats/timeseries.html">Time-Series Data File Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Formats/metadata.html">Metadata File Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Formats/hdf5.html">HDF5 File Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Formats/xml.html">XML Meta-Data</a></li>
</ul>
<p class="caption"><span class="caption-text">Downloading Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Web/webclients.html">Web Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Web/seedlink.html">SeedLink</a></li>
</ul>
<p class="caption"><span class="caption-text">Data Processing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Processing/processing.html">Basic Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Processing/processing.html#customizable-functions">Customizable Functions</a></li>
</ul>
<p class="caption"><span class="caption-text">Submodules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Submodules/quake.html">Quake</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Submodules/quake.html#reading-earthquake-data-files">Reading Earthquake Data Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Submodules/randseis.html">RandSeis</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendices</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="function_list.html">Utility Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="seisio_file_format.html">SeisIO Native Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="seisio_file_format.html#simple-object-types">Simple Object Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="seisio_file_format.html#location-types">Location Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="seisio_file_format.html#response-types">Response Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="seisio_file_format.html#the-misc-dictionary">The Misc Dictionary</a></li>
<li class="toctree-l1"><a class="reference internal" href="seisio_file_format.html#compound-object-types">Compound Object Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="seisio_file_format.html#data-type-codes">Data Type Codes</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_syntax.html">Data Requests Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="keywords.html">SeisIO Standard Keywords</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#fdsn-data-query">FDSN data query</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fdsn-station-query">FDSN station query</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fdsn-event-header-data-query">FDSN event header/data query</a></li>
<li class="toctree-l2"><a class="reference internal" href="#irisws-data-query">IRISWS data query</a></li>
<li class="toctree-l2"><a class="reference internal" href="#seedlink-sessions">SeedLink sessions</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SeisIO</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Examples</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/src/Appendices/examples.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="examples">
<span id="webex"></span><h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<div class="section" id="fdsn-data-query">
<h2>FDSN data query<a class="headerlink" href="#fdsn-data-query" title="Permalink to this headline">¶</a></h2>
<p>1. Download 10 minutes of data from four stations at Mt. St. Helens (WA, USA), delete the low-gain channels, and save as SAC files in the current directory.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="s2">&quot;FDSN&quot;</span><span class="p">,</span> <span class="s2">&quot;CC.VALT, UW.SEP, UW.SHW, UW.HSR&quot;</span><span class="p">,</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;IRIS&quot;</span><span class="p">,</span> <span class="n">t</span><span class="o">=-</span><span class="mi">600</span><span class="p">)</span>
<span class="n">S</span> <span class="o">-=</span> <span class="s2">&quot;SHW.ELZ..UW&quot;</span>
<span class="n">S</span> <span class="o">-=</span> <span class="s2">&quot;HSR.ELZ..UW&quot;</span>
<span class="n">writesac</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
</pre></div>
</div>
<p>2. Get 5 stations, 2 networks, all channels, last 600 seconds of data at IRIS</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CHA</span> <span class="o">=</span> <span class="s2">&quot;CC.PALM, UW.HOOD, UW.TIMB, CC.HIYU, UW.TDH&quot;</span>
<span class="n">TS</span> <span class="o">=</span> <span class="n">u2d</span><span class="p">(</span><span class="n">time</span><span class="p">())</span>
<span class="n">TT</span> <span class="o">=</span> <span class="o">-</span><span class="mi">600</span>
<span class="n">S</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="s2">&quot;FDSN&quot;</span><span class="p">,</span> <span class="n">CHA</span><span class="p">,</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;IRIS&quot;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">TS</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">TT</span><span class="p">)</span>
</pre></div>
</div>
<p>3. A request to FDSN Potsdam, time-synchronized, with some verbosity</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ts</span> <span class="o">=</span> <span class="s2">&quot;2011-03-11T06:00:00&quot;</span>
<span class="n">te</span> <span class="o">=</span> <span class="s2">&quot;2011-03-11T06:05:00&quot;</span>
<span class="n">R</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="s2">&quot;FDSN&quot;</span><span class="p">,</span> <span class="s2">&quot;GE.BKB..BH?&quot;</span><span class="p">,</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;GFZ&quot;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">te</span><span class="p">,</span> <span class="n">v</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">true</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="fdsn-station-query">
<h2>FDSN station query<a class="headerlink" href="#fdsn-station-query" title="Permalink to this headline">¶</a></h2>
<p>A sample FDSN station query</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S</span> <span class="o">=</span> <span class="n">FDSNsta</span><span class="p">(</span><span class="s2">&quot;CC.VALT..,PB.B001..BS?,PB.B001..E??&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="fdsn-event-header-data-query">
<h2>FDSN event header/data query<a class="headerlink" href="#fdsn-event-header-data-query" title="Permalink to this headline">¶</a></h2>
<p>Get seismic and strainmeter records for the P-wave of the Tohoku-Oki great earthquake on two borehole stations and write to native SeisData format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S</span> <span class="o">=</span> <span class="n">FDSNevt</span><span class="p">(</span><span class="s2">&quot;201103110547&quot;</span><span class="p">,</span> <span class="s2">&quot;PB.B004..EH?,PB.B004..BS?,PB.B001..BS?,PB.B001..EH?&quot;</span><span class="p">)</span>
<span class="n">wseis</span><span class="p">(</span><span class="s2">&quot;201103110547_evt.seis&quot;</span><span class="p">,</span> <span class="n">S</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="irisws-data-query">
<h2>IRISWS data query<a class="headerlink" href="#irisws-data-query" title="Permalink to this headline">¶</a></h2>
<p>Note that the “src” keyword is not used in IRIS queries.</p>
<ol class="arabic simple">
<li><p>Get trace data from IRISws from <code class="docutils literal notranslate"><span class="pre">TS</span></code> to <code class="docutils literal notranslate"><span class="pre">TT</span></code> at channels <code class="docutils literal notranslate"><span class="pre">CHA</span></code></p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>S = SeisData()
CHA = &quot;UW.TDH..EHZ, UW.VLL..EHZ, CC.VALT..BHZ&quot;
TS = u2d(time()-86400)
TT = 600
get_data!(S, &quot;IRIS&quot;, CHA, s=TS, t=TT)
</pre></div>
</div>
<p>2. Get synchronized trace data from IRISws with a 55-second timeout on HTTP requests, written directly to disk.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CHA</span> <span class="o">=</span> <span class="s2">&quot;UW.TDH..EHZ, UW.VLL..EHZ, CC.VALT..BHZ&quot;</span>
<span class="n">TS</span> <span class="o">=</span> <span class="n">u2d</span><span class="p">(</span><span class="n">time</span><span class="p">())</span>
<span class="n">TT</span> <span class="o">=</span> <span class="o">-</span><span class="mi">600</span>
<span class="n">S</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="s2">&quot;IRIS&quot;</span><span class="p">,</span> <span class="n">CHA</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">TS</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">TT</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">true</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="n">true</span><span class="p">)</span>
</pre></div>
</div>
<p>3. Request 10 minutes of continuous vertical-component data from a small May 2016 earthquake swarm at Mt. Hood, OR, USA:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">STA</span> <span class="o">=</span> <span class="s2">&quot;UW.HOOD.--.BHZ,CC.TIMB.--.EHZ&quot;</span>
<span class="n">TS</span> <span class="o">=</span> <span class="s2">&quot;2016-05-16T14:50:00&quot;</span><span class="p">;</span> <span class="n">TE</span> <span class="o">=</span> <span class="mi">600</span>
<span class="n">S</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="s2">&quot;IRIS&quot;</span><span class="p">,</span> <span class="n">STA</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">TS</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">TE</span><span class="p">)</span>
</pre></div>
</div>
<p>4. Grab data from a predetermined time window in two different formats</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ts</span> <span class="o">=</span> <span class="s2">&quot;2016-03-23T23:10:00&quot;</span>
<span class="n">te</span> <span class="o">=</span> <span class="s2">&quot;2016-03-23T23:17:00&quot;</span>
<span class="n">S</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="s2">&quot;IRIS&quot;</span><span class="p">,</span> <span class="s2">&quot;CC.JRO..BHZ&quot;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">te</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;sacbl&quot;</span><span class="p">)</span>
<span class="n">T</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="s2">&quot;IRIS&quot;</span><span class="p">,</span> <span class="s2">&quot;CC.JRO..BHZ&quot;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">te</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;miniseed&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="seedlink-sessions">
<h2>SeedLink sessions<a class="headerlink" href="#seedlink-sessions" title="Permalink to this headline">¶</a></h2>
<p>1. An attended SeedLink session in DATA mode. Initiate a SeedLink session in DATA mode using config file SL.conf and write all packets received directly to file (in addition to parsing to S itself). Set nominal refresh interval for checking for new data to 10 s. A mini-seed file will be generated automatically.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>S = SeisData()
SeedLink!(S, &quot;SL.conf&quot;, mode=&quot;DATA&quot;, r=10, w=true)
</pre></div>
</div>
<p>2. An unattended SeedLink download in TIME mode. Get the next two minutes of data from stations GPW, MBW, SHUK in the UW network. Put the Julia REPL to sleep while the request fills. If the connection is still open, close it (SeedLink’s time bounds arent precise in TIME mode, so this may or may not be necessary). Pause briefly so that the last data packets are written. Synchronize results and write data in native SeisIO file format.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sta = &quot;UW.GPW,UW.MBW,UW.SHUK&quot;
s0 = now()
S = SeedLink(sta, mode=&quot;TIME&quot;, s=s0, t=120, r=10)
sleep(180)
isopen(S.c[1]) &amp;&amp; close(S.c[1])
sleep(20)
sync!(S)
fname = string(&quot;GPW_MBW_SHUK&quot;, s0, &quot;.seis&quot;)
wseis(fname, S)
</pre></div>
</div>
<p>3. A SeedLink session in TIME mode</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sta</span> <span class="o">=</span> <span class="s2">&quot;UW.GPW, UW.MBW, UW.SHUK&quot;</span>
<span class="n">S1</span> <span class="o">=</span> <span class="n">SeedLink</span><span class="p">(</span><span class="n">sta</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;TIME&quot;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>
</pre></div>
</div>
<p>4. A SeedLink session in DATA mode with multiple servers, including a config file. Data are parsed roughly every 10 seconds. A total of 5 minutes of data are requested.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sta = [&quot;CC.SEP&quot;, &quot;UW.HDW&quot;]
# To ensure precise timing, we&#39;ll pass d0 and d1 as strings
st = 0.0
en = 300.0
dt = en-st
(d0,d1) = parsetimewin(st,en)

S = SeisData()
SeedLink!(S, sta, mode=&quot;TIME&quot;, r=10.0, s=d0, t=d1)
println(stdout, &quot;...first link initialized...&quot;)

# Seedlink with a config file
config_file = &quot;seedlink.conf&quot;
SeedLink!(S, config_file, r=10.0, mode=&quot;TIME&quot;, s=d0, t=d1)
println(stdout, &quot;...second link initialized...&quot;)

# Seedlink with a config string
SeedLink!(S, &quot;CC.VALT..???, UW.ELK..EHZ&quot;, mode=&quot;TIME&quot;, r=10.0, s=d0, t=d1)
println(stdout, &quot;...third link initialized...&quot;)
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="keywords.html" class="btn btn-neutral float-left" title="SeisIO Standard Keywords" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2019, Joshua Jones, Ph.D.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>